<robot name="wave_rover" xmlns:xacro="http://ros.org/wiki/xacro">

    <!-- Base -->
    <link name="base_link">
        <visual>
          <geometry>
            <mesh filename="package://wave_rover_description/meshes/wave_rover_model.stl" scale="0.001 0.001 0.001"/>
          </geometry>
          <material name="grey">
            <color rgba="0.6 0.6 0.6 1.0"/>
          </material>
        </visual>
        <collision>
          <geometry>
            <box size="0.3 0.2 0.1"/> <!-- crude collision approximation -->
          </geometry>
        </collision>
        <inertial>
          <mass value="2.0"/>
          <inertia ixx="0.01" iyy="0.01" izz="0.01" ixy="0.0" ixz="0.0" iyz="0.0"/>
        </inertial>
      </link>

      <!-- Bracket -->
      <link name="camera_bracket_link">
        <visual>
          <geometry>
            <mesh filename="package://wave_rover_description/meshes/realsense_bracket.stl" scale="0.001 0.001 0.001"/>
          </geometry>
        </visual>
      </link>

      <joint name="bracket_mount" type="fixed">
        <parent link="base_link"/>
        <child link="camera_bracket_link"/>
        <origin xyz="0.0 -0.06 0.052" rpy="0 0 0"/>
      </joint>

      <link name="camera_link">
        <visual>
          <geometry>
            <mesh filename="package://wave_rover_description/meshes/realsense_camera.stl" scale="0.001 0.001 0.001"/>
          </geometry>
        </visual>
      </link>
      
      <joint name="camera_mount" type="fixed">
        <parent link="camera_bracket_link"/>
        <child link="camera_link"/>
        <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
      </joint>
    
      <!-- Gazebo plugins -->
      <gazebo>
        <plugin name="diff_drive_controller" filename="libgazebo_ros_diff_drive.so">
          <ros>
            <namespace>/wave_rover</namespace>
          </ros>
          <left_joint>left_wheel_joint</left_joint>
          <right_joint>right_wheel_joint</right_joint>
          ...
        </plugin>
      </gazebo>

      <gazebo reference="camera_link">
        <sensor name="realsense_sim" type="depth">
          <update_rate>30.0</update_rate>
          <camera>
            <horizontal_fov>1.3962634</horizontal_fov>
            <image>
              <width>640</width>
              <height>480</height>
              <format>R8G8B8</format>
            </image>
            <clip>
              <near>0.1</near>
              <far>5.0</far>
            </clip>
          </camera>
          <plugin name="gazebo_ros_depth_camera" filename="libgazebo_ros_depth_camera.so">
            <ros>
              <namespace>/camera</namespace>
            </ros>
            <camera_name>camera</camera_name>
            <image_topic_name>color/image_raw</image_topic_name>
            <depth_image_topic_name>depth/image_raw</depth_image_topic_name>
            <info_topic_name>camera_info</info_topic_name>
          </plugin>
        </sensor>
      </gazebo>
      

      
  </robot>
  
